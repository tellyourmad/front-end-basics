<!doctype html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8">
  </head>
  <body>
    <script>
      //如果Array的原型中没有forEach方法
      if(Array.prototype.forEach===undefined){
        //就为Array的原型添加forEach方法，参数定义为callback
        Array.prototype.forEach=
          function(callback){
            //遍历当前数组中每个元素
            for(var i=0;i<this.length;i++){
              //如果当前元素不是undefined
              if(this[i]!==undefined){
                //调用callback，传入当前元素值,当前位置，当前数组作为参数
                callback(this[i],i,this);
              }
            }
          }
      }
      //如果Array的原型中没有map方法
      if(Array.prototype.map===undefined){
        //就为Array的原型添加map方法，参数定义为callback
        Array.prototype.map=
          function(callback){
            //创建一个空数组arr
            var arr=[];
            //遍历原数组中每个元素
            for(var i=0;i<this.length;i++){
              //如果原数组中当前元素不是undefined
              if(this[i]!==undefined){
                //调用callback,传入当前元素值,当前位置，原数组，将结果保存到arr的相同位置
                arr[i]=
                  callback(this[i],i,this);
              }
            }//(遍历结束)
            return arr;//返回arr
          }
      }
      var arr=[1,,3,,5];
      arr.map(function(val,idx,arr){
        arr[idx]=val*2;
      });
      document.write(String(arr)+"<br>");

      var arr_odd=[1,3,5,7,9];
      var arr_even=arr_odd.map(function(val){
        return val*2;
      });
      document.write(String(arr_odd)+"<br>");
      document.write(String(arr_even)+"<br>");
    </script>
  </body>
</html>